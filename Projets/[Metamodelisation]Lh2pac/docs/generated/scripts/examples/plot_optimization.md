
<!--
 DO NOT EDIT.
 THIS FILE WAS AUTOMATICALLY GENERATED BY mkdocs-gallery.
 TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
 "docs/scripts/examples/plot_optimization.py"
 LINE NUMBERS ARE GIVEN BELOW.
-->

!!! note

    Click [here](#download_links)
    to download the full example code


# Optimization

We want to minimize the Rosenbrock function $f(x,y)=(1-x)^2+100(y-x**2)^2$
over the domain $[-2,2]^2$.

<!-- GENERATED FROM PYTHON SOURCE LINES 7-12 -->

```{.python }
from gemseo import configure_logger
from gemseo import create_design_space
from gemseo import create_discipline
from gemseo import create_scenario

```








<!-- GENERATED FROM PYTHON SOURCE LINES 13-15 -->

Before starting,
we activate the logger as an optimization process logs meaningful information.

<!-- GENERATED FROM PYTHON SOURCE LINES 15-17 -->

```{.python }
configure_logger()

```




Out:
{: .mkd-glr-script-out }

```{.shell .mkd-glr-script-out-disp }

<RootLogger root (INFO)>
```





<!-- GENERATED FROM PYTHON SOURCE LINES 18-21 -->

Firstly,
we define the discipline computing the Rosenbrock function
and the Euclidean distance to the optimum:

<!-- GENERATED FROM PYTHON SOURCE LINES 21-27 -->

```{.python }
discipline = create_discipline(
    "AnalyticDiscipline",
    expressions={"z": "(1-x)**2+100*(y-x**2)**2", "c": "((x-1)**2+(y-1)**2)**0.5"},
    name="Rosenbrock"
)

```








<!-- GENERATED FROM PYTHON SOURCE LINES 28-29 -->

Then, we create the design space:

<!-- GENERATED FROM PYTHON SOURCE LINES 29-33 -->

```{.python }
design_space = create_design_space()
design_space.add_variable("x", l_b=-2., u_b=2., value=0.)
design_space.add_variable("y", l_b=-2., u_b=2., value=0.)

```








<!-- GENERATED FROM PYTHON SOURCE LINES 34-40 -->

Thirdly,
we put these elements together in a scenario
to minimize the Rosenbrock function
under the constraint that the distance
between the design point and the solution of the unconstrained problem
is greater or equal to 1.

<!-- GENERATED FROM PYTHON SOURCE LINES 40-43 -->

```{.python }
scenario = create_scenario([discipline], "DisciplinaryOpt", "z", design_space)
scenario.add_constraint("c", constraint_type="ineq", positive=True, value=1.)

```








<!-- GENERATED FROM PYTHON SOURCE LINES 44-52 -->

!!! note

    GEMSEO is a Python library
    dedicated to multidisciplinary design optimization (MDO)
    based on the notion of MDO formulation.
    This is why the second positional argument `formulation` is mandatory.
    But when using the scenario with a unique discipline,
    don't bother and consider `"DisciplinaryOpt"`.

<!-- GENERATED FROM PYTHON SOURCE LINES 54-55 -->

before executing it with a gradient-free optimizer:

<!-- GENERATED FROM PYTHON SOURCE LINES 55-57 -->

```{.python }
scenario.execute({"algo": "NLOPT_COBYLA", "max_iter": 100})

```




Out:
{: .mkd-glr-script-out }

```{.shell .mkd-glr-script-out-disp }
    INFO - 15:01:39:  
    INFO - 15:01:39: *** Start MDOScenario execution ***
    INFO - 15:01:39: MDOScenario
    INFO - 15:01:39:    Disciplines: Rosenbrock
    INFO - 15:01:39:    MDO formulation: DisciplinaryOpt
    INFO - 15:01:39: Optimization problem:
    INFO - 15:01:39:    minimize z(x, y)
    INFO - 15:01:39:    with respect to x, y
    INFO - 15:01:39:    subject to constraints:
    INFO - 15:01:39:       c(x, y) >= 1.0
    INFO - 15:01:39:    over the design space:
    INFO - 15:01:39:       +------+-------------+-------+-------------+-------+
    INFO - 15:01:39:       | Name | Lower bound | Value | Upper bound | Type  |
    INFO - 15:01:39:       +------+-------------+-------+-------------+-------+
    INFO - 15:01:39:       | x    |      -2     |   0   |      2      | float |
    INFO - 15:01:39:       | y    |      -2     |   0   |      2      | float |
    INFO - 15:01:39:       +------+-------------+-------+-------------+-------+
    INFO - 15:01:39: Solving optimization problem with algorithm NLOPT_COBYLA:
    INFO - 15:01:39:      1%|          | 1/100 [00:00<00:00, 370.98 it/sec, obj=1]
    INFO - 15:01:39:      2%|▏         | 2/100 [00:00<00:00, 512.34 it/sec, obj=100]
    INFO - 15:01:39:      3%|▎         | 3/100 [00:00<00:00, 643.82 it/sec, obj=101]
    INFO - 15:01:39:      4%|▍         | 4/100 [00:00<00:00, 676.69 it/sec, obj=148]
    INFO - 15:01:39:      5%|▌         | 5/100 [00:00<00:00, 705.97 it/sec, obj=24.8]
    INFO - 15:01:39:      6%|▌         | 6/100 [00:00<00:00, 731.05 it/sec, obj=3.64]
    INFO - 15:01:39:      7%|▋         | 7/100 [00:00<00:00, 750.46 it/sec, obj=6.11]
    INFO - 15:01:39:      8%|▊         | 8/100 [00:00<00:00, 764.37 it/sec, obj=1.88]
    INFO - 15:01:39:      9%|▉         | 9/100 [00:00<00:00, 775.65 it/sec, obj=1.4]
    INFO - 15:01:39:     10%|█         | 10/100 [00:00<00:00, 786.75 it/sec, obj=0.954]
    INFO - 15:01:39:     11%|█         | 11/100 [00:00<00:00, 795.43 it/sec, obj=1.21]
    INFO - 15:01:39:     12%|█▏        | 12/100 [00:00<00:00, 799.24 it/sec, obj=0.861]
    INFO - 15:01:39:     13%|█▎        | 13/100 [00:00<00:00, 805.23 it/sec, obj=0.88]
    INFO - 15:01:39:     14%|█▍        | 14/100 [00:00<00:00, 811.34 it/sec, obj=0.841]
    INFO - 15:01:39:     15%|█▌        | 15/100 [00:00<00:00, 810.23 it/sec, obj=0.833]
    INFO - 15:01:39:     16%|█▌        | 16/100 [00:00<00:00, 814.59 it/sec, obj=0.784]
    INFO - 15:01:39:     17%|█▋        | 17/100 [00:00<00:00, 818.78 it/sec, obj=0.762]
    INFO - 15:01:39:     18%|█▊        | 18/100 [00:00<00:00, 821.96 it/sec, obj=0.742]
    INFO - 15:01:39:     19%|█▉        | 19/100 [00:00<00:00, 824.50 it/sec, obj=0.749]
    INFO - 15:01:39:     20%|██        | 20/100 [00:00<00:00, 828.76 it/sec, obj=0.729]
    INFO - 15:01:39:     21%|██        | 21/100 [00:00<00:00, 831.84 it/sec, obj=0.727]
    INFO - 15:01:39:     22%|██▏       | 22/100 [00:00<00:00, 832.65 it/sec, obj=0.745]
    INFO - 15:01:39:     23%|██▎       | 23/100 [00:00<00:00, 834.49 it/sec, obj=0.713]
    INFO - 15:01:39:     24%|██▍       | 24/100 [00:00<00:00, 837.37 it/sec, obj=0.7]
    INFO - 15:01:39:     25%|██▌       | 25/100 [00:00<00:00, 838.84 it/sec, obj=0.688]
    INFO - 15:01:39:     26%|██▌       | 26/100 [00:00<00:00, 839.80 it/sec, obj=0.675]
    INFO - 15:01:39:     27%|██▋       | 27/100 [00:00<00:00, 842.34 it/sec, obj=0.664]
    INFO - 15:01:39:     28%|██▊       | 28/100 [00:00<00:00, 843.63 it/sec, obj=0.652]
    INFO - 15:01:39:     29%|██▉       | 29/100 [00:00<00:00, 844.76 it/sec, obj=0.64]
    INFO - 15:01:39:     30%|███       | 30/100 [00:00<00:00, 846.70 it/sec, obj=0.629]
    INFO - 15:01:39:     31%|███       | 31/100 [00:00<00:00, 848.68 it/sec, obj=0.618]
    INFO - 15:01:39:     32%|███▏      | 32/100 [00:00<00:00, 849.73 it/sec, obj=0.607]
    INFO - 15:01:39:     33%|███▎      | 33/100 [00:00<00:00, 850.13 it/sec, obj=0.596]
    INFO - 15:01:39:     34%|███▍      | 34/100 [00:00<00:00, 851.23 it/sec, obj=0.585]
    INFO - 15:01:39:     35%|███▌      | 35/100 [00:00<00:00, 851.50 it/sec, obj=0.576]
    INFO - 15:01:39:     36%|███▌      | 36/100 [00:00<00:00, 852.40 it/sec, obj=0.566]
    INFO - 15:01:39:     37%|███▋      | 37/100 [00:00<00:00, 853.81 it/sec, obj=0.544]
    INFO - 15:01:39:     38%|███▊      | 38/100 [00:00<00:00, 855.34 it/sec, obj=0.524]
    INFO - 15:01:39:     39%|███▉      | 39/100 [00:00<00:00, 855.57 it/sec, obj=0.513]
    INFO - 15:01:39:     40%|████      | 40/100 [00:00<00:00, 856.11 it/sec, obj=0.491]
    INFO - 15:01:39:     41%|████      | 41/100 [00:00<00:00, 857.30 it/sec, obj=0.511]
    INFO - 15:01:39:     42%|████▏     | 42/100 [00:00<00:00, 857.88 it/sec, obj=0.577]
    INFO - 15:01:39:     43%|████▎     | 43/100 [00:00<00:00, 858.22 it/sec, obj=0.527]
    INFO - 15:01:39:     44%|████▍     | 44/100 [00:00<00:00, 859.30 it/sec, obj=0.493]
    INFO - 15:01:39:     45%|████▌     | 45/100 [00:00<00:00, 860.50 it/sec, obj=0.485]
    INFO - 15:01:39:     46%|████▌     | 46/100 [00:00<00:00, 860.58 it/sec, obj=0.483]
    INFO - 15:01:39:     47%|████▋     | 47/100 [00:00<00:00, 861.14 it/sec, obj=0.511]
    INFO - 15:01:39:     48%|████▊     | 48/100 [00:00<00:00, 861.95 it/sec, obj=0.47]
    INFO - 15:01:39:     49%|████▉     | 49/100 [00:00<00:00, 862.87 it/sec, obj=0.468]
    INFO - 15:01:39:     50%|█████     | 50/100 [00:00<00:00, 862.71 it/sec, obj=0.457]
    INFO - 15:01:39:     51%|█████     | 51/100 [00:00<00:00, 863.13 it/sec, obj=0.449]
    INFO - 15:01:39:     52%|█████▏    | 52/100 [00:00<00:00, 864.02 it/sec, obj=0.44]
    INFO - 15:01:39:     53%|█████▎    | 53/100 [00:00<00:00, 864.28 it/sec, obj=0.431]
    INFO - 15:01:39:     54%|█████▍    | 54/100 [00:00<00:00, 863.64 it/sec, obj=0.415]
    INFO - 15:01:39:     55%|█████▌    | 55/100 [00:00<00:00, 864.20 it/sec, obj=0.411]
    INFO - 15:01:39:     56%|█████▌    | 56/100 [00:00<00:00, 864.12 it/sec, obj=0.394]
    INFO - 15:01:39:     57%|█████▋    | 57/100 [00:00<00:00, 864.38 it/sec, obj=0.422]
    INFO - 15:01:39:     58%|█████▊    | 58/100 [00:00<00:00, 864.96 it/sec, obj=0.403]
    INFO - 15:01:39:     59%|█████▉    | 59/100 [00:00<00:00, 865.52 it/sec, obj=0.393]
    INFO - 15:01:39:     60%|██████    | 60/100 [00:00<00:00, 865.61 it/sec, obj=0.391]
    INFO - 15:01:39:     61%|██████    | 61/100 [00:00<00:00, 865.85 it/sec, obj=0.382]
    INFO - 15:01:39:     62%|██████▏   | 62/100 [00:00<00:00, 866.42 it/sec, obj=0.375]
    INFO - 15:01:39:     63%|██████▎   | 63/100 [00:00<00:00, 866.84 it/sec, obj=0.371]
    INFO - 15:01:39:     64%|██████▍   | 64/100 [00:00<00:00, 866.99 it/sec, obj=0.363]
    INFO - 15:01:39:     65%|██████▌   | 65/100 [00:00<00:00, 867.38 it/sec, obj=0.364]
    INFO - 15:01:39:     66%|██████▌   | 66/100 [00:00<00:00, 867.75 it/sec, obj=0.362]
    INFO - 15:01:39:     67%|██████▋   | 67/100 [00:00<00:00, 867.72 it/sec, obj=0.357]
    INFO - 15:01:39:     68%|██████▊   | 68/100 [00:00<00:00, 867.89 it/sec, obj=0.355]
    INFO - 15:01:39:     69%|██████▉   | 69/100 [00:00<00:00, 868.40 it/sec, obj=0.351]
    INFO - 15:01:39:     70%|███████   | 70/100 [00:00<00:00, 868.31 it/sec, obj=0.347]
    INFO - 15:01:39:     71%|███████   | 71/100 [00:00<00:00, 868.42 it/sec, obj=0.34]
    INFO - 15:01:39:     72%|███████▏  | 72/100 [00:00<00:00, 868.56 it/sec, obj=0.334]
    INFO - 15:01:39:     73%|███████▎  | 73/100 [00:00<00:00, 868.50 it/sec, obj=0.334]
    INFO - 15:01:39:     74%|███████▍  | 74/100 [00:00<00:00, 868.98 it/sec, obj=0.334]
    INFO - 15:01:39:     75%|███████▌  | 75/100 [00:00<00:00, 869.46 it/sec, obj=0.337]
    INFO - 15:01:39:     76%|███████▌  | 76/100 [00:00<00:00, 869.67 it/sec, obj=0.332]
    INFO - 15:01:39:     77%|███████▋  | 77/100 [00:00<00:00, 869.94 it/sec, obj=0.331]
    INFO - 15:01:39:     78%|███████▊  | 78/100 [00:00<00:00, 870.54 it/sec, obj=0.329]
    INFO - 15:01:39:     79%|███████▉  | 79/100 [00:00<00:00, 870.99 it/sec, obj=0.331]
    INFO - 15:01:39:     80%|████████  | 80/100 [00:00<00:00, 871.17 it/sec, obj=0.328]
    INFO - 15:01:39:     81%|████████  | 81/100 [00:00<00:00, 871.39 it/sec, obj=0.329]
    INFO - 15:01:39:     82%|████████▏ | 82/100 [00:00<00:00, 871.70 it/sec, obj=0.329]
    INFO - 15:01:39:     83%|████████▎ | 83/100 [00:00<00:00, 872.34 it/sec, obj=0.328]
    INFO - 15:01:39:     84%|████████▍ | 84/100 [00:00<00:00, 872.30 it/sec, obj=0.328]
    INFO - 15:01:39:     85%|████████▌ | 85/100 [00:00<00:00, 872.43 it/sec, obj=0.329]
    INFO - 15:01:39:     86%|████████▌ | 86/100 [00:00<00:00, 872.20 it/sec, obj=0.328]
    INFO - 15:01:39:     87%|████████▋ | 87/100 [00:00<00:00, 872.08 it/sec, obj=0.328]
    INFO - 15:01:39:     88%|████████▊ | 88/100 [00:00<00:00, 872.16 it/sec, obj=0.328]
    INFO - 15:01:39:     89%|████████▉ | 89/100 [00:00<00:00, 872.56 it/sec, obj=0.328]
    INFO - 15:01:39:     90%|█████████ | 90/100 [00:00<00:00, 872.99 it/sec, obj=0.328]
    INFO - 15:01:39:     91%|█████████ | 91/100 [00:00<00:00, 873.00 it/sec, obj=0.328]
    INFO - 15:01:39:     92%|█████████▏| 92/100 [00:00<00:00, 873.32 it/sec, obj=0.328]
    INFO - 15:01:39:     93%|█████████▎| 93/100 [00:00<00:00, 873.34 it/sec, obj=0.328]
    INFO - 15:01:39:     94%|█████████▍| 94/100 [00:00<00:00, 873.15 it/sec, obj=0.328]
    INFO - 15:01:39:     95%|█████████▌| 95/100 [00:00<00:00, 873.21 it/sec, obj=0.328]
    INFO - 15:01:39:     96%|█████████▌| 96/100 [00:00<00:00, 873.42 it/sec, obj=0.328]
    INFO - 15:01:39:     97%|█████████▋| 97/100 [00:00<00:00, 873.37 it/sec, obj=0.328]
    INFO - 15:01:39:     98%|█████████▊| 98/100 [00:00<00:00, 873.66 it/sec, obj=0.328]
    INFO - 15:01:39:     99%|█████████▉| 99/100 [00:00<00:00, 873.98 it/sec, obj=0.328]
    INFO - 15:01:39:    100%|██████████| 100/100 [00:00<00:00, 873.92 it/sec, obj=0.328]
    INFO - 15:01:39: Optimization result:
    INFO - 15:01:39:    Optimizer info:
    INFO - 15:01:39:       Status: None
    INFO - 15:01:39:       Message: Maximum number of iterations reached. GEMSEO Stopped the driver
    INFO - 15:01:39:       Number of calls to the objective function by the optimizer: 102
    INFO - 15:01:39:    Solution:
    INFO - 15:01:39:       The solution is feasible.
    INFO - 15:01:39:       Objective: 0.3283010611441774
    INFO - 15:01:39:       Standardized constraints:
    INFO - 15:01:39:          -[c-1.0] = 6.591815177348082e-05
    INFO - 15:01:39:       Design space:
    INFO - 15:01:39:          +------+-------------+--------------------+-------------+-------+
    INFO - 15:01:39:          | Name | Lower bound |       Value        | Upper bound | Type  |
    INFO - 15:01:39:          +------+-------------+--------------------+-------------+-------+
    INFO - 15:01:39:          | x    |      -2     | 0.4281647812612155 |      2      | float |
    INFO - 15:01:39:          | y    |      -2     | 0.1797118490118108 |      2      | float |
    INFO - 15:01:39:          +------+-------------+--------------------+-------------+-------+
    INFO - 15:01:39: *** End MDOScenario execution (time: 0:00:00.126928) ***

{'max_iter': 100, 'algo': 'NLOPT_COBYLA'}
```





<!-- GENERATED FROM PYTHON SOURCE LINES 58-60 -->

Lastly,
we can plot the optimization history:

<!-- GENERATED FROM PYTHON SOURCE LINES 60-61 -->

```{.python }
scenario.post_process("OptHistoryView", save=False, show=True)
```



<ul class="mkd-glr-horizontal">
<img alt="Evolution of the optimization variables" src="../images/mkd_glr_plot_optimization_001.png" srcset="../images/mkd_glr_plot_optimization_001.png", class="sphx-glr-single-img" /><img alt="Evolution of the objective value" src="../images/mkd_glr_plot_optimization_002.png" srcset="../images/mkd_glr_plot_optimization_002.png", class="sphx-glr-single-img" /><img alt="Distance to the optimum" src="../images/mkd_glr_plot_optimization_003.png" srcset="../images/mkd_glr_plot_optimization_003.png", class="sphx-glr-single-img" /><img alt="Evolution of the inequality constraints" src="../images/mkd_glr_plot_optimization_004.png" srcset="../images/mkd_glr_plot_optimization_004.png", class="sphx-glr-single-img" />
</ul>


Out:
{: .mkd-glr-script-out }

```{.shell .mkd-glr-script-out-disp }
/home/mickael/ModIA_5A/Metamodelisation/lh2pac/.venv/lib/python3.9/site-packages/gemseo/utils/matplotlib_figure.py:57: UserWarning: FigureCanvasAgg is non-interactive, and thus cannot be shown
  plt.show()

<gemseo.post.opt_history_view.OptHistoryView object at 0x7a7f63307ee0>
```






**Total running time of the script:** ( 0 minutes  1.367 seconds)

<div id="download_links"></div>



[:fontawesome-solid-download: Download Python source code: plot_optimization.py](./plot_optimization.py){ .md-button .center}

[:fontawesome-solid-download: Download Jupyter notebook: plot_optimization.ipynb](./plot_optimization.ipynb){ .md-button .center}


[Gallery generated by mkdocs-gallery](https://mkdocs-gallery.github.io){: .mkd-glr-signature }
